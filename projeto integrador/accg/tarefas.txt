
ğŸ“¦ Passo 1.1: ConfiguraÃ§Ã£o do App e Modelo de UsuÃ¡rio   -> (Sebastian/Joao Victor)
   
   âœ“ Criar app 'users':
     â†’ python manage.py startapp users
   
   âœ“ Registrar app:
     â†’ Adicionar 'users' em INSTALLED_APPS no settings.py
   
   âœ“ Criar modelo customizado:
     â†’ Arquivo: users/models.py
     â†’ Classe: User(AbstractUser)
     â†’ Import: from django.contrib.auth.models import AbstractUser
   
   âœ“ Configurar modelo de autenticaÃ§Ã£o:
     â†’ Arquivo: settings.py
     â†’ Adicionar: AUTH_USER_MODEL = 'users.User'
   
   âœ“ Executar migraÃ§Ãµes:
     â†’ python manage.py makemigrations
     â†’ python manage.py migrate

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“¦ Passo 1.2: ImplementaÃ§Ã£o da API REST de UsuÃ¡rios (CRUD) -> (Sebastian/Joao Victor)

   âœ“ Criar Serializer:
     â†’ Arquivo: users/serializers.py
     â†’ Classe: UserSerializer(serializers.ModelSerializer)
     â†’ Fields: ['id', 'first_name', 'username', 'password']
     
     âš ï¸ IMPORTANTE: Sobrescrever mÃ©todo create():
        def create(self, validated_data):
            password = validated_data.pop('password')
            user = User.objects.create(**validated_data)
            user.set_password(password)  # Criptografa a senha
            user.save()
            return user
   
   âœ“ Criar ViewSet:
     â†’ Arquivo: users/views.py
     â†’ Classe: UserViewSet(viewsets.ModelViewSet)
     â†’ Atributos:
       â€¢ queryset = User.objects.all()
       â€¢ serializer_class = UserSerializer
   
   âœ“ Configurar Rotas:
     â†’ Arquivo: config/urls.py (ou urls.py principal)
     â†’ Importar: from rest_framework.routers import DefaultRouter
     â†’ Criar: router = DefaultRouter()
     â†’ Registrar: router.register(r'users', UserViewSet, basename='users')
     â†’ Incluir: path('api/', include(router.urls))
   
   âœ“ Testar Endpoints:
     â†’ POST   /api/users/     (Criar usuÃ¡rio)
     â†’ GET    /api/users/     (Listar usuÃ¡rios)
     â†’ GET    /api/users/{id}/ (Detalhar usuÃ¡rio)
     â†’ PUT    /api/users/{id}/ (Atualizar usuÃ¡rio)
     â†’ DELETE /api/users/{id}/ (Deletar usuÃ¡rio)
     â†’ Ferramentas: Bruno/ Postman / Insomnia / httpie

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Passo 2.1: ConfiguraÃ§Ã£o do App e Modelo de Associado -> (Kaymmi)
   
   âœ“ Criar app 'associados':
     â†’ python manage.py startapp associados
   
   âœ“ Registrar app:
     â†’ Adicionar 'associados' em INSTALLED_APPS no settings.py
   
   âœ“ Criar modelo Associado:
     â†’ Arquivo: associados/models.py
     â†’ Classe: Associado(models.Model)
     â†’ Campos sugeridos:
       â€¢ id (auto)
       â€¢ razao_social (CharField, max_length=255)
       â€¢ nome_fantasia (CharField, max_length=255, null=True, blank=True)
       â€¢ cnpj (CharField, max_length=14, unique=True)
       â€¢ email (EmailField)
       â€¢ telefone (CharField, max_length=20)
       â€¢ endereco (TextField)
       â€¢ contrato (FileField, upload_to='contratos/', null=True, blank=True)
       â€¢ ficha_cadastral (FileField, upload_to='fichas/', null=True, blank=True)
       â€¢ data_vencimento (DateField)
       â€¢ status (CharField com choices: ATIVO, INATIVO, SUSPENSO)
       â€¢ data_cadastro (DateTimeField, auto_now_add=True)
       â€¢ data_atualizacao (DateTimeField, auto_now=True)
   
   âš ï¸ IMPORTANTE: Implementar data_vencimento automÃ¡tica:
      â†’ Sobrescrever mÃ©todo save() no model:
        def save(self, *args, **kwargs):
            if not self.pk:  # Se for criaÃ§Ã£o (novo registro)
                # Define vencimento para 1 ano a partir de hoje
                from datetime import date, timedelta
                self.data_vencimento = date.today() + timedelta(days=365)
            super().save(*args, **kwargs)
   
   âœ“ Executar migraÃ§Ãµes:
     â†’ python manage.py makemigrations associados
     â†’ python manage.py migrate

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“¦ Passo 2.2: ImplementaÃ§Ã£o da API REST de Associados (CRUD) -> (Kaymmi)

   âœ“ Criar Serializer:
     â†’ Arquivo: associados/serializers.py
     â†’ Classe: AssociadoSerializer(serializers.ModelSerializer)
     â†’ Fields: ['id', 'razao_social', 'nome_fantasia', 'cnpj', 'email', 
                'telefone', 'endereco', 'contrato', 'ficha_cadastral', 
                'data_vencimento', 'status', 'data_cadastro', 'data_atualizacao']
     
     âš ï¸ IMPORTANTE: Validar CNPJ:
        â†’ Criar mÃ©todo validate_cnpj():
          def validate_cnpj(self, value):
              # Remove caracteres nÃ£o numÃ©ricos
              cnpj = re.sub(r'[^0-9]', '', value)
              
              # Verifica se tem 14 dÃ­gitos
              if len(cnpj) != 14:
                  raise serializers.ValidationError("CNPJ deve ter 14 dÃ­gitos")
              
              # ValidaÃ§Ã£o dos dÃ­gitos verificadores (opcional - implementar algoritmo)
              # Por enquanto, apenas verifica formato
              
              return cnpj
          
          â†’ Importar: import re no inÃ­cio do arquivo
     
     âš ï¸ IMPORTANTE: Configurar upload de arquivos:
        â†’ No Meta da classe:
          extra_kwargs = {
              'contrato': {'write_only': True, 'required': False},
              'ficha_cadastral': {'write_only': True, 'required': False},
          }
   
   âœ“ Criar ViewSet:
     â†’ Arquivo: associados/views.py
     â†’ Classe: AssociadoViewSet(viewsets.ModelViewSet)
     â†’ Atributos:
       â€¢ queryset = Associado.objects.all()
       â€¢ serializer_class = AssociadoSerializer
       â€¢ permission_classes = [IsAuthenticated]  # Opcional
     
     âš ï¸ OPcional: Adicionar filtros e buscas:
        â†’ from rest_framework import filters
        â†’ filter_backends = [filters.SearchFilter, filters.OrderingFilter]
        â†’ search_fields = ['razao_social', 'cnpj', 'email']
        â†’ ordering_fields = ['data_cadastro', 'razao_social']
   
   âœ“ Configurar Rotas:
     â†’ Arquivo: config/urls.py (ou urls.py principal)
     â†’ Importar: from rest_framework.routers import DefaultRouter
     â†’ Registrar: router.register(r'associados', AssociadoViewSet, basename='associados')
     â†’ JÃ¡ deve estar incluÃ­do em: path('api/', include(router.urls))
   
   âœ“ Configurar Media Files (para upload):
     â†’ Arquivo: settings.py
     â†’ Adicionar:
       MEDIA_URL = '/media/'
       MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
     
     â†’ Arquivo: urls.py principal
     â†’ Adicionar no final:
       from django.conf import settings
       from django.conf.urls.static import static
       
       if settings.DEBUG:
           urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
   
   âœ“ Testar Endpoints:
     â†’ POST   /api/associados/           (Criar associado)
     â†’ GET    /api/associados/           (Listar associados)
     â†’ GET    /api/associados/?search=... (Buscar por razao_social, cnpj, email)
     â†’ GET    /api/associados/{id}/      (Detalhar associado)
     â†’ PUT    /api/associados/{id}/      (Atualizar associado)
     â†’ PATCH  /api/associados/{id}/      (AtualizaÃ§Ã£o parcial)
     â†’ DELETE /api/associados/{id}/      (Deletar associado)
     â†’ Ferramentas: Bruno / Postman / Insomnia / httpie

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Passo 3.1: ConfiguraÃ§Ã£o do App e Modelo de Plano de Contas -> (Samuel)
   
   âœ“ Criar app 'financeiro':
     â†’ python manage.py startapp financeiro
   
   âœ“ Registrar app:
     â†’ Adicionar 'financeiro' em INSTALLED_APPS no settings.py
   
   âœ“ Criar modelo PlanoDeContas:
     â†’ Arquivo: financeiro/models.py
     â†’ Classe: PlanoDeContas(models.Model)
     â†’ Campos sugeridos:
       â€¢ id (auto)
       â€¢ codigo (CharField, max_length=20, unique=True)
       â€¢ descricao (CharField, max_length=255)
       â€¢ tipo (CharField com choices: RECEITA, DESPESA)
       â€¢ categoria (CharField, max_length=100, null=True, blank=True)
       â€¢ ativo (BooleanField, default=True)
       â€¢ observacoes (TextField, null=True, blank=True)
       â€¢ data_cadastro (DateTimeField, auto_now_add=True)
       â€¢ data_atualizacao (DateTimeField, auto_now=True)
     
     âš ï¸ IMPORTANTE: Adicionar mÃ©todo __str__:
        def __str__(self):
            return f"{self.codigo} - {self.descricao}"
     
     âš ï¸ IMPORTANTE: Adicionar Meta:
        class Meta:
            verbose_name = "Plano de Contas"
            verbose_name_plural = "Planos de Contas"
            ordering = ['codigo']
   
   âœ“ Executar migraÃ§Ãµes:
     â†’ python manage.py makemigrations financeiro
     â†’ python manage.py migrate

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“¦ Passo 3.2: ImplementaÃ§Ã£o da API REST de Plano de Contas (CRUD) -> (Samuel)

   âœ“ Criar Serializer:
     â†’ Arquivo: financeiro/serializers.py
     â†’ Classe: PlanoDeContasSerializer(serializers.ModelSerializer)
     â†’ Fields: ['id', 'codigo', 'descricao', 'tipo', 'categoria', 
                'ativo', 'observacoes', 'data_cadastro', 'data_atualizacao']
     
     âš ï¸ IMPORTANTE: ValidaÃ§Ã£o de cÃ³digo:
        â†’ Criar mÃ©todo validate_codigo():
          def validate_codigo(self, value):
              # Verifica se cÃ³digo jÃ¡ existe (exceto na atualizaÃ§Ã£o)
              if self.instance is None:  # Se for criaÃ§Ã£o
                  if PlanoDeContas.objects.filter(codigo=value).exists():
                      raise serializers.ValidationError("CÃ³digo jÃ¡ existe")
              return value
     
     âš ï¸ IMPORTANTE: ValidaÃ§Ã£o de tipo:
        â†’ Criar mÃ©todo validate_tipo():
          def validate_tipo(self, value):
              tipos_validos = ['RECEITA', 'DESPESA']
              if value not in tipos_validos:
                  raise serializers.ValidationError(
                      f"Tipo deve ser um dos seguintes: {', '.join(tipos_validos)}"
                  )
              return value
   
   âœ“ Criar ViewSet:
     â†’ Arquivo: financeiro/views.py
     â†’ Classe: PlanoDeContasViewSet(viewsets.ModelViewSet)
     â†’ Atributos:
       â€¢ queryset = PlanoDeContas.objects.filter(ativo=True)
       â€¢ serializer_class = PlanoDeContasSerializer
       â€¢ permission_classes = [IsAuthenticated]  # Opcional
     
     âš ï¸ OPcional: Adicionar filtros:
        â†’ from rest_framework import filters
        â†’ filter_backends = [filters.SearchFilter, filters.OrderingFilter]
        â†’ search_fields = ['codigo', 'descricao', 'categoria']
        â†’ ordering_fields = ['codigo', 'descricao', 'tipo']
        â†’ filterset_fields = ['tipo', 'ativo', 'categoria']
   
   âœ“ Configurar Rotas:
     â†’ Arquivo: config/urls.py (ou urls.py principal)
     â†’ Importar: from rest_framework.routers import DefaultRouter
     â†’ Registrar: router.register(r'planos-contas', PlanoDeContasViewSet, basename='planos-contas')
     â†’ JÃ¡ deve estar incluÃ­do em: path('api/', include(router.urls))
   
   âœ“ Testar Endpoints:
     â†’ POST   /api/planos-contas/           (Criar plano de contas)
     â†’ GET    /api/planos-contas/           (Listar planos de contas)
     â†’ GET    /api/planos-contas/?tipo=RECEITA (Filtrar por tipo)
     â†’ GET    /api/planos-contas/?search=... (Buscar por cÃ³digo, descriÃ§Ã£o)
     â†’ GET    /api/planos-contas/{id}/      (Detalhar plano de contas)
     â†’ PUT    /api/planos-contas/{id}/      (Atualizar plano de contas)
     â†’ PATCH  /api/planos-contas/{id}/      (AtualizaÃ§Ã£o parcial)
     â†’ DELETE /api/planos-contas/{id}/      (Deletar plano de contas - soft delete)
     â†’ Ferramentas: Bruno / Postman / Insomnia / httpie

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ Passo 4.1: ImplementaÃ§Ã£o de Endpoint de HistÃ³rico do Associado -> (Humberto)

   âš ï¸ PRÃ‰-REQUISITOS:
     â†’ App 'associados' criado e funcionando (Passo 2.1 e 2.2)
     â†’ App 'financeiro' criado (Passo 3.1 e 3.2)
     â†’ MÃ³dulo de faturamento/pagamentos implementado (se aplicÃ¡vel)
   
   âœ“ Criar Service para HistÃ³rico:
     â†’ Arquivo: associados/services.py (criar novo arquivo)
     â†’ Classe: AssociadoHistoricoService
     â†’ MÃ©todo: get_historico_associado(associado_id)
     
     âš ï¸ Exemplo de estrutura do service:
        class AssociadoHistoricoService:
            @staticmethod
            def get_historico_associado(associado_id):
                associado = Associado.objects.get(id=associado_id)
                
                # Consultar status financeiro (exemplo)
                # pendentes = Fatura.objects.filter(associado=associado, status='PENDENTE')
                # pagas = Fatura.objects.filter(associado=associado, status='PAGA')
                
                # Consolidar informaÃ§Ãµes
                historico = {
                    'associado': {
                        'id': associado.id,
                        'razao_social': associado.razao_social,
                        'cnpj': associado.cnpj,
                        'status': associado.status,
                        'data_vencimento': associado.data_vencimento,
                    },
                    'status_financeiro': {
                        'total_pendente': 0,  # calcular
                        'total_pago': 0,      # calcular
                        'ultimo_pagamento': None,  # data
                    },
                    'pagamentos': [],  # lista de pagamentos
                    'faturas': [],     # lista de faturas
                    'eventos': [],     # eventos do associado (se houver)
                }
                
                return historico
   
   âœ“ Criar Serializer de HistÃ³rico:
     â†’ Arquivo: associados/serializers.py
     â†’ Classe: AssociadoHistoricoSerializer(serializers.Serializer)
     â†’ Fields (nÃ£o depende de Model):
       â€¢ associado (nested serializer ou dict)
       â€¢ status_financeiro (nested serializer)
       â€¢ pagamentos (lista)
       â€¢ faturas (lista)
       â€¢ eventos (lista)
     
     âš ï¸ Exemplo de estrutura:
        class AssociadoHistoricoSerializer(serializers.Serializer):
            associado = AssociadoResumoSerializer(read_only=True)
            status_financeiro = serializers.DictField()
            pagamentos = serializers.ListField()
            faturas = serializers.ListField()
            eventos = serializers.ListField()
   
   âœ“ Adicionar Action Customizada no ViewSet:
     â†’ Arquivo: associados/views.py
     â†’ Adicionar mÃ©todo no AssociadoViewSet:
       
       from rest_framework.decorators import action
       from rest_framework.response import Response
       from .services import AssociadoHistoricoService
       from .serializers import AssociadoHistoricoSerializer
       
       @action(detail=True, methods=['get'], url_path='historico')
       def historico(self, request, pk=None):
           associado = self.get_object()
           service = AssociadoHistoricoService()
           dados_historico = service.get_historico_associado(associado.id)
           
           serializer = AssociadoHistoricoSerializer(dados_historico)
           return Response(serializer.data)
   
   âœ“ Testar Endpoint:
     â†’ GET /api/associados/{id}/historico/  (Consultar histÃ³rico)
     â†’ Exemplo: GET /api/associados/1/historico/
     â†’ Ferramentas: Bruno / Postman / Insomnia / httpie
     
     âš ï¸ NOTA: Este endpoint retornarÃ¡ informaÃ§Ãµes consolidadas do associado,
        incluindo status financeiro e histÃ³rico de pagamentos/faturas.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ RESUMO DE ENDPOINTS DA API:

1. UsuÃ¡rios (Sebastian/Joao Victor):
   â€¢ POST   /api/users/
   â€¢ GET    /api/users/
   â€¢ GET    /api/users/{id}/
   â€¢ PUT    /api/users/{id}/
   â€¢ DELETE /api/users/{id}/

2. Associados (Kaymmi):
   â€¢ POST   /api/associados/
   â€¢ GET    /api/associados/
   â€¢ GET    /api/associados/?search=...
   â€¢ GET    /api/associados/{id}/
   â€¢ PUT    /api/associados/{id}/
   â€¢ PATCH  /api/associados/{id}/
   â€¢ DELETE /api/associados/{id}/
   â€¢ GET    /api/associados/{id}/historico/  (Humberto)

3. Plano de Contas (Samuel):
   â€¢ POST   /api/planos-contas/
   â€¢ GET    /api/planos-contas/
   â€¢ GET    /api/planos-contas/?tipo=RECEITA
   â€¢ GET    /api/planos-contas/?search=...
   â€¢ GET    /api/planos-contas/{id}/
   â€¢ PUT    /api/planos-contas/{id}/
   â€¢ PATCH  /api/planos-contas/{id}/
   â€¢ DELETE /api/planos-contas/{id}/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
